<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="author" content="Foredoomed">
  <meta name="generator" content="jekyll">
  <meta name="description" content="The homepage of Zhixingheyi">
  <link href="favicon.ico" rel="icon" type="image/x-icon" />
  <link rel="stylesheet" href="/css/highlight.css" type="text/css">
  <title></title>
</head>

<body>

<div style="width:700px">
  <h1>快速搭建Octopress博客环境</h1>

<em>By Foredoomed on <time date="2012-06-14 23:04:00 +0800">June 14, 2012</time></em>

<p>这次为一个新买的VPS安装博客环境，特此记录如下。</p>

<h2 id="section">删除和替换已有软件</h2>

<pre><code>servive sendmail stop
yum remove sendmail

service httpd stop
yum remove httpd

service rsyslog stop
yum remove rsyslog

# 添加EPEL软件库
rpm -Uvh http:#dl.fedoraproject.org/pub/epel/6/i386/epel-release-6-7.noarch.rpm

# 安装syslog-ng代替rsyslog
yum install syslog-ng
chkconfig syslog-ng on

# 安装dropbear代替openssh
yum install dropbear
chkconfig dropbear on

# 等dropbear配置好后
service sshd stop
yum remove openssh

# 安装vsftpd作为ftp服务器
yum install vsftpd
chkconfig vsftpd on

# 添加用户
groupadd www
useradd -g www username
passwd username

# 设定ftp登陆目录权限
chown -R usernmae /path/to/ftp/folder

# 安装yum-utils
yum install yum-utils

# 更新软件
yum upgrade

# 安装ppp
rpm -ivh http:#poptop.sourceforge.net/yum/stable/rhel6/i386/ppp-2.4.5-17.0.rhel6.i686.rpm

# 安装pptpd
rpm -ivh http:#poptop.sourceforge.net/yum/stable/rhel6/i386/pptpd-1.3.4-2.el6.i686.rpm</code></pre>

<h2 id="octopress">安装Octopress所需软件</h2>

<pre><code># 安装git
yum install git

# 安装RVM
curl -L get.rvm.io | bash -s stable

# 安装ruby的依赖包
yum install -y gcc-c++ patch readline readline-devel zlib zlib-devel libyaml-devel libffi-devel openssl-devel make bzip2 autoconf automake libtool bison

# 添加nginx软件库
rpm -Uvh http:#nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm

# 安装nginx
yum install nginx

# 安装ruby
rvm install 1.9.2

# 安装Octopress的依赖包
yum install python-devel

# 安装Octopress
mkdir /data
cd /data
git clone git:#github.com/imathis/octopress.git octopress

gem install bundler
rbenv rehash #If you use rbenv, rehash to be able to run the bundle command
bundle install
rake install

cd octopress
rake generate</code></pre>

<h2 id="vps">VPS设置</h2>

<pre><code># 配置vim
vim /etc/vimrc

# 加入下面几行
syntax on
set nu
set mouse=a
set tabstop=4

# 禁用IPv6
vim /etc/sysconfig/network
NETWORKING_IPV6=&quot;no&quot;

# 设置文件最大打开数
vim /etc/security/limits.conf
# 加入下面两行
* soft nofile 65535
* hard nofile 65535

# 把服务器时间改为上海时间
cp -f /usr/share/zoneinfo/Asia/Shanghai /etc/localtime

# 关闭不需要的服务
ntsysv  #按空格选择和取消，按F12退出</code></pre>

<h2 id="section-1">其他设置</h2>

<p>因为众所周知的原因在天朝twitter是无法访问的，所以最好去掉内置的twitter插件，这样就不会去请求twitter的js文件。方法是修改source/_includes文件夹下_twitter_sharing.html的文件名。</p>

<p>关于dropbear/vsftp/pptp的配置可以参考<a href="http://liuxuan.info/blog/2011/08/21/install-dropbear-vsftp-pptpd-on-vps/">这里</a>，nginx的配置则可以参考<a href="http://liuxuan.info/blog/2011/11/08/switching-from-wordpress-to-octopress/">这里</a>。</p>


<br><br>

<div id="disqus_thread" style="width:700px"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'zhixingheyi'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<hr>

Zhixingheyi - <a href="http://liuxuan.info">http://liuxuan.info/</a>
</div>

<script src="/javascript/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17293168-3']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
  var sc_project=8495631;
  var sc_invisible=1;
  var sc_security="5b0817e1";
  var scJsHost = (("https:" == document.location.protocol) ?
  "https://secure." : "http://www.");
  document.write("<sc"+"ript type='text/javascript' src='" +
  scJsHost +
  "statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript>
  <div class="statcounter"><a title="website
  statistics" href="http://statcounter.com/"
  target="_blank"><img class="statcounter"
  src="https://c.statcounter.com/8495631/0/5b0817e1/1/"
  alt="website statistics"></a></div>
</noscript>
<!-- End of StatCounter Code for Default Guide -->

</body>
</html>